(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"17c6":function(n,e,t){"use strict";(function(n,e){var a=t("47a9");t("8806"),t("861b");a(t("3240"));var o=a(t("1d60"));n.__webpack_require_UNI_MP_PLUGIN__=t,e(o.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},"1d60":function(n,e,t){"use strict";t.r(e);var a=t("9a2d"),o=t("e13c");for(var i in o)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(i);t("e27b");var u=t("828b"),c=Object(u["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},"6cf5":function(n,e,t){},"9a2d":function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return a}));var a={uPopup:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(t.bind(null,"31d4"))},uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,"30ca"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"13ec"))},uniSection:function(){return t.e("uni_modules/uni-section/components/uni-section/uni-section").then(t.bind(null,"c554"))},qiunDataCharts:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(t.bind(null,"7179"))}},o=function(){var n=this.$createElement;this._self._c},i=[]},e13c:function(n,e,t){"use strict";t.r(e);var a=t("fbc3"),o=t.n(a);for(var i in a)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return a[n]}))}(i);e["default"]=o.a},e27b:function(n,e,t){"use strict";var a=t("6cf5"),o=t.n(a);o.a},fbc3:function(n,e,t){"use strict";(function(n,a){var o=t("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(t("1ec4"));var i={data:function(){return{nickname:"",avatarUrl:"",show:!1,userData:{},isLogin:0,chartData:{},opts:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[5,5,5,5],enableScroll:!1,extra:{pie:{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!0,borderWidth:3,borderColor:"#FFFFFF"}}}}},methods:{submitUser:function(){console.log(this.$refs.inputName),this.show=!1,this.getServerData()},onChooseAvatar:function(n){console.log(n.detail.avatarUrl),this.avatarUrl=n.detail.avatarUrl},open:function(){},close:function(){this.show=!1},login:function(){var e=this;this.isLogin||n.showModal({title:"微信一键登录",showCancel:!0,confirmColor:"#18bc37",success:function(t){t.cancel?n.showToast({title:"用户取消!",duration:500}):(n.showLoading({title:"登录中"}),n.getUserProfile({desc:"获取数据",success:function(t){e.getWeiXinData(t.userInfo),e.show=!0,e.isLogin=1,n.showToast({title:"登录成功！"})},fail:function(){n.showToast({title:"登录失败！"})}}))}})},getWeiXinData:function(e){var t=this;n.login({provider:"weixin"}).then((function(n){a.callFunction({name:"login",data:{code:n.code}}).then((function(n){t.getData(n.result.openid,e)}))}))},getData:function(n,e){var t=this;this.isLogin=1,a.database().collection("user").where({openid:n}).get().then((function(e){t.userData=e.result.data,0==t.userData.length&&a.database().collection("user").add({name:"曹健滔",age:15,openid:n}).then((function(n){console.log(n)}))}))},getServerData:function(){var n=this;setTimeout((function(){n.chartData=JSON.parse(JSON.stringify({series:[{data:[{name:"楼下",value:50,labelShow:!1},{name:"饭堂",value:30,labelShow:!1},{name:"南门",value:20,labelShow:!1},{name:"东门",value:18,labelShow:!1},{name:"北门",value:22},{name:"其他",value:10,labelShow:!1}]}]}))}),500)},click:function(n){this.$refs.uToast.success("点击了第".concat(n,"个"))}}};e.default=i}).call(this,t("df3c")["default"],t("861b")["default"])}},[["17c6","common/runtime","common/vendor"]]]);